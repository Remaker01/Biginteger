\hypertarget{_bigint_8h_source}{}\doxysection{Bigint.\+h}
\label{_bigint_8h_source}\index{BigInteger/Bigint.h@{BigInteger/Bigint.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef BIGINT\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define BIGINT\_H}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <cstring>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}Exceptions.h"{}}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#define NUM\_GROUP\_SIZE 4}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define MOD\_BASE 10000}}
\DoxyCodeLine{10 \textcolor{keyword}{using} std::string;}
\DoxyCodeLine{11 }
\DoxyCodeLine{25 \textcolor{keyword}{class }\mbox{\hyperlink{class_biginteger}{Biginteger}} \{}
\DoxyCodeLine{26   \textcolor{keyword}{private}:}
\DoxyCodeLine{27     \textcolor{keywordtype}{int} *data;}
\DoxyCodeLine{28     \textcolor{keywordtype}{int} eff\_len,sign;}
\DoxyCodeLine{29     \textcolor{comment}{//sign == 0:0；-\/1:负数；1：正数；2：无效，说明此尚未被正确构造，仍是空值}}
\DoxyCodeLine{30     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} check(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s,\textcolor{keywordtype}{int} len) \{}
\DoxyCodeLine{31         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 1; i < len; i++) \{}
\DoxyCodeLine{32             \textcolor{keywordflow}{if}(!(s[i] >= \textcolor{charliteral}{'0'}\&\&s[i] <= \textcolor{charliteral}{'9'}))    \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{33         \}}
\DoxyCodeLine{34         \textcolor{comment}{//第一个是负号或数字，如果是负号，则长度必须大于一。后面的必须全部是数字。}}
\DoxyCodeLine{35         \textcolor{keywordflow}{if}(s[0] == \textcolor{charliteral}{'-\/'})    \textcolor{keywordflow}{return} len != 1;}
\DoxyCodeLine{36         \textcolor{keywordflow}{else}    \textcolor{keywordflow}{return} s[0] >= \textcolor{charliteral}{'0'}\&\&s[0] <= \textcolor{charliteral}{'9'};}
\DoxyCodeLine{37     \}}
\DoxyCodeLine{38     \textcolor{comment}{/*删除前导0*/}}
\DoxyCodeLine{39     \textcolor{keyword}{inline} \textcolor{keywordtype}{int} firNoneZero(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s,\textcolor{keywordtype}{int} len) \{}
\DoxyCodeLine{40         \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{41         \textcolor{keywordflow}{for}(i = (s[0] == \textcolor{charliteral}{'-\/'}) ? 1 : 0; i < len -\/ 1\&\&s[i] == \textcolor{charliteral}{'0'}; i++);}
\DoxyCodeLine{42         \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{43     \}}
\DoxyCodeLine{44     \textcolor{comment}{/*转换为int数组，方便乘法与加法运算*/}}
\DoxyCodeLine{45     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} convert(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s,\textcolor{keywordtype}{int} len) \{}
\DoxyCodeLine{46         \textcolor{keywordtype}{int} k = 0,mini = (s[0] == \textcolor{charliteral}{'-\/'}) ? 1 : 0;}
\DoxyCodeLine{47         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = len-\/1; i >= mini; i -\/= NUM\_GROUP\_SIZE) \{}
\DoxyCodeLine{48             \textcolor{keywordtype}{int} now = 0;}
\DoxyCodeLine{49             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = i -\/ (NUM\_GROUP\_SIZE -\/ 1); j <= i; j++) \{}
\DoxyCodeLine{50                 \textcolor{keywordflow}{if}(j < mini)    \textcolor{keywordflow}{continue};}
\DoxyCodeLine{51                 now = now * 10 + (s[j] -\/ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{52             \}}
\DoxyCodeLine{53             data[k++] = now;}
\DoxyCodeLine{54         \}}
\DoxyCodeLine{55     \}}
\DoxyCodeLine{56     \textcolor{comment}{/*处理加法剩下的位数。a为位数较多的数*/}}
\DoxyCodeLine{57     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} Add\_lefts(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a,\mbox{\hyperlink{class_biginteger}{Biginteger}} \&res,\textcolor{keywordtype}{bool} \&carry,\textcolor{keywordtype}{int} minlen) \{}
\DoxyCodeLine{58         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = minlen; i < a.eff\_len; i++) \{}
\DoxyCodeLine{59             \textcolor{keywordtype}{int} now = a.data[i] + carry;}
\DoxyCodeLine{60             res.data[res.eff\_len++] = now \% MOD\_BASE;}
\DoxyCodeLine{61             carry = (bool)(now / MOD\_BASE);}
\DoxyCodeLine{62         \}}
\DoxyCodeLine{63     \}}
\DoxyCodeLine{64     \textcolor{comment}{/*求长度*/}}
\DoxyCodeLine{65     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} make\_length(\mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{}
\DoxyCodeLine{66         \textcolor{keywordtype}{int} highest = a.data[a.eff\_len -\/ 1];}
\DoxyCodeLine{67         \textcolor{keywordflow}{if}(a.eff\_len == 1\&\&highest == 0)    a.\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}} = 1;}
\DoxyCodeLine{68         \textcolor{keywordflow}{else}    a.\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}} = (a.eff\_len -\/ 1) * NUM\_GROUP\_SIZE + (\textcolor{keywordtype}{int})log10(highest) + 1;}
\DoxyCodeLine{69     \}}
\DoxyCodeLine{70     \textcolor{comment}{/*处理减法。在此处提供统一接口是因为结果可正可负*/}}
\DoxyCodeLine{71     \mbox{\hyperlink{class_biginteger}{Biginteger}} general\_subt(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&large,\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&small) \{}
\DoxyCodeLine{72         \textcolor{keywordtype}{bool} tw = 0;  \textcolor{comment}{//退位}}
\DoxyCodeLine{73         \mbox{\hyperlink{class_biginteger}{Biginteger}} ret(large.\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}});}
\DoxyCodeLine{74         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < small.eff\_len; i++) \{}
\DoxyCodeLine{75             \textcolor{keywordtype}{int} now = large.data[i] -\/ small.data[i] -\/ tw;}
\DoxyCodeLine{76             \textcolor{keywordflow}{if}(now < 0) \{}
\DoxyCodeLine{77                 tw = 1;}
\DoxyCodeLine{78                 now = MOD\_BASE -\/ abs(now);}
\DoxyCodeLine{79             \}}
\DoxyCodeLine{80             \textcolor{keywordflow}{else}    tw = 0;}
\DoxyCodeLine{81             ret.data[ret.eff\_len++] = now \% MOD\_BASE;}
\DoxyCodeLine{82         \}\textcolor{comment}{//处理后面几位}}
\DoxyCodeLine{83         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = small.eff\_len; i < large.eff\_len; i++) \{}
\DoxyCodeLine{84             \textcolor{keywordtype}{int} now = large.data[i] -\/ tw;}
\DoxyCodeLine{85             \textcolor{keywordflow}{if}(now < 0) \{}
\DoxyCodeLine{86                 tw = 1;}
\DoxyCodeLine{87                 now = MOD\_BASE -\/ abs(now);}
\DoxyCodeLine{88             \}}
\DoxyCodeLine{89             \textcolor{keywordflow}{else}    tw = 0;}
\DoxyCodeLine{90             ret.data[ret.eff\_len++] = now \% MOD\_BASE;}
\DoxyCodeLine{91         \}}
\DoxyCodeLine{92         \textcolor{comment}{//前导零的特殊处理。注意a==b的特殊情况}}
\DoxyCodeLine{93         \textcolor{comment}{//注意：由于上面统一用位数较多数的位数初始化，所以此处可能不知要删1个}}
\DoxyCodeLine{94         \textcolor{keywordflow}{while}(ret.data[ret.eff\_len -\/ 1] == 0\&\&ret.eff\_len > 1)}
\DoxyCodeLine{95             ret.eff\_len-\/-\/;}
\DoxyCodeLine{96         make\_length(ret);}
\DoxyCodeLine{97         \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{98     \}}
\DoxyCodeLine{99   \textcolor{keyword}{public}:}
\DoxyCodeLine{101     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}}; \textcolor{comment}{//长度}}
\DoxyCodeLine{105 \textcolor{comment}{}    \mbox{\hyperlink{class_biginteger_a21756d968ef9ac08e3731cae5f8fe502}{Biginteger}}():data(NULL),eff\_len(0),sign(2),\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}}(0) \{\}}
\DoxyCodeLine{111     \mbox{\hyperlink{class_biginteger_ae4615925f117a9633f8fc9f42ee8d318}{Biginteger}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s) \{}
\DoxyCodeLine{112         \textcolor{keywordflow}{if}(s == NULL)    \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_null_exception}{NullException}}();}
\DoxyCodeLine{113         \textcolor{keywordtype}{int} len = strlen(s);}
\DoxyCodeLine{114         \textcolor{keywordflow}{if}(!check(s,len))    \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_number_format_exception}{NumberFormatException}}();}
\DoxyCodeLine{115         \textcolor{keywordtype}{int} loc = firNoneZero(s,len);}
\DoxyCodeLine{116         \mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}} = len -\/ loc;}
\DoxyCodeLine{117         eff\_len = ceil(\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}} / (\textcolor{keywordtype}{double})NUM\_GROUP\_SIZE);}
\DoxyCodeLine{118         data = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[eff\_len]();}
\DoxyCodeLine{119         sign = (s[0] == \textcolor{charliteral}{'-\/'}) ? -\/1 : 1;}
\DoxyCodeLine{120         \textcolor{comment}{//0的特殊处理}}
\DoxyCodeLine{121         \textcolor{keywordflow}{if}(strcmp(s,\textcolor{stringliteral}{"{}0"{}}) == 0||strcmp(s,\textcolor{stringliteral}{"{}-\/0"{}}) == 0) \{}
\DoxyCodeLine{122             data[0] = 0;}
\DoxyCodeLine{123             sign = 0;}
\DoxyCodeLine{124         \}}
\DoxyCodeLine{125         \textcolor{comment}{//注 长度不是原来的字符串长度了}}
\DoxyCodeLine{126         \textcolor{keywordflow}{else}    convert(s + loc,\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}});}
\DoxyCodeLine{127     \}}
\DoxyCodeLine{134     \mbox{\hyperlink{class_biginteger_a9df141c0f08c604235dca2ad403e1b99}{Biginteger}}(\textcolor{keywordtype}{string} str) \{}
\DoxyCodeLine{135         \textcolor{keywordtype}{char} *S = \textcolor{keyword}{new} \textcolor{keywordtype}{char}[str.length() + 1];}
\DoxyCodeLine{136         strcpy(S,str.c\_str());}
\DoxyCodeLine{137         \textcolor{keyword}{new}(\textcolor{keyword}{this}) \mbox{\hyperlink{class_biginteger_a21756d968ef9ac08e3731cae5f8fe502}{Biginteger}}(S);}
\DoxyCodeLine{138         \textcolor{keywordflow}{if}(S != NULL)      \textcolor{keyword}{delete} S;}
\DoxyCodeLine{139     \}}
\DoxyCodeLine{144     \mbox{\hyperlink{class_biginteger_a6226edabfed468509ac46b47204bc8ea}{Biginteger}}(\textcolor{keywordtype}{int} len):eff\_len(0),sign(2),\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}}(0) \{}
\DoxyCodeLine{145         data = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[(int)ceil(len / (\textcolor{keywordtype}{double})NUM\_GROUP\_SIZE)]();}
\DoxyCodeLine{146     \}}
\DoxyCodeLine{150       \textcolor{comment}{//拷贝构造函数}}
\DoxyCodeLine{151     \mbox{\hyperlink{class_biginteger_a4058518547ee370dcc58d8223a3a23f7}{Biginteger}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&another) \{}
\DoxyCodeLine{152         eff\_len = another.eff\_len;}
\DoxyCodeLine{153         \mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}} = another.\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}};}
\DoxyCodeLine{154         sign = another.sign;}
\DoxyCodeLine{155         data = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[another.eff\_len]();}
\DoxyCodeLine{156         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < eff\_len; i++)    data[i] = another.data[i];}
\DoxyCodeLine{157     \}}
\DoxyCodeLine{158     \mbox{\hyperlink{class_biginteger}{Biginteger}} \&operator=(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&another) \{}
\DoxyCodeLine{159         \textcolor{keywordflow}{if} (\textcolor{keyword}{this} != \&another) \{  \textcolor{comment}{//加上判断，防止自己赋给自己}}
\DoxyCodeLine{160             \textcolor{keywordflow}{if} (data)    \textcolor{keyword}{delete} data;  \textcolor{comment}{//如果原来有数据，则释放数据}}
\DoxyCodeLine{161             \textcolor{keyword}{new}(\textcolor{keyword}{this}) \mbox{\hyperlink{class_biginteger_a21756d968ef9ac08e3731cae5f8fe502}{Biginteger}}(another);}
\DoxyCodeLine{162         \}}
\DoxyCodeLine{163         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{164     \}}
\DoxyCodeLine{165     \textcolor{comment}{/*比较大小。注意从高位向低位比。*/}}
\DoxyCodeLine{171     \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_biginteger_a7b79e7d36214eb88bb7455585ca0ac31}{compare}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{}
\DoxyCodeLine{172         \textcolor{keywordflow}{if}(sign == 2||a.sign == 2)    \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_null_exception}{NullException}}();}
\DoxyCodeLine{173         \textcolor{keywordtype}{int} alen = a.eff\_len;}
\DoxyCodeLine{174         \textcolor{comment}{//一个为负，一个不为负}}
\DoxyCodeLine{175         \textcolor{keywordflow}{if}(sign == -\/1\&\&a.sign != -\/1)    \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{176         \textcolor{keywordflow}{if}(sign == 1\&\&a.sign != 1)      \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{177         \textcolor{keywordflow}{if}(sign == 0\&\&a.sign != 0)      \textcolor{keywordflow}{return} (a.sign == 1) ? -\/1 : 1;}
\DoxyCodeLine{178         \textcolor{keywordtype}{int} ret = 0;}
\DoxyCodeLine{179         \textcolor{keywordflow}{if}(eff\_len > a.eff\_len)         ret = 1;}
\DoxyCodeLine{180         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(eff\_len < a.eff\_len)    ret = -\/1;}
\DoxyCodeLine{181         \textcolor{comment}{//进入此分支，说明符号相同且位数相同}}
\DoxyCodeLine{182         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{183             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = alen-\/1; i >= 0; i-\/-\/) \{}
\DoxyCodeLine{184                 \textcolor{keywordflow}{if}(data[i] > a.data[i]) \{}
\DoxyCodeLine{185                     ret = 1;}
\DoxyCodeLine{186                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{187                 \}}
\DoxyCodeLine{188                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(data[i] < a.data[i]) \{}
\DoxyCodeLine{189                     ret = -\/1;}
\DoxyCodeLine{190                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{191                 \}}
\DoxyCodeLine{192             \}}
\DoxyCodeLine{193         \}}
\DoxyCodeLine{194         \textcolor{keywordflow}{if}(sign == -\/1)    ret = -\/ret;}
\DoxyCodeLine{195         \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{196     \}}
\DoxyCodeLine{197     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} operator<(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a)  \{\textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_a7b79e7d36214eb88bb7455585ca0ac31}{compare}}(a) == -\/1;\}}
\DoxyCodeLine{198     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} operator>(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a)  \{\textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_a7b79e7d36214eb88bb7455585ca0ac31}{compare}}(a) == 1;\}}
\DoxyCodeLine{199     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} operator>=(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{\textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_a7b79e7d36214eb88bb7455585ca0ac31}{compare}}(a) >= 0;\}}
\DoxyCodeLine{200     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} operator<=(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{\textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_a7b79e7d36214eb88bb7455585ca0ac31}{compare}}(a) <= 0;\}}
\DoxyCodeLine{201     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} operator==(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{\textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_a7b79e7d36214eb88bb7455585ca0ac31}{compare}}(a) == 0;\}}
\DoxyCodeLine{202     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} operator!=(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{\textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_a7b79e7d36214eb88bb7455585ca0ac31}{compare}}(a) != 0;\}}
\DoxyCodeLine{207     \mbox{\hyperlink{class_biginteger}{Biginteger}} \mbox{\hyperlink{class_biginteger_a5d4b76a5a8edc6ee5ab2ec1761613627}{Negate}}() \{}
\DoxyCodeLine{208         \textcolor{keywordflow}{if}(sign == 2)    \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_null_exception}{NullException}}();}
\DoxyCodeLine{209         \mbox{\hyperlink{class_biginteger}{Biginteger}} ret = *\textcolor{keyword}{this};}
\DoxyCodeLine{210         ret.sign = -\/ret.sign;}
\DoxyCodeLine{211         \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{212     \}}
\DoxyCodeLine{216      \mbox{\hyperlink{class_biginteger}{Biginteger}} \mbox{\hyperlink{class_biginteger_af4d0428ed8e5d370ec4491e18b40333f}{absolute}}() \{}
\DoxyCodeLine{217         \textcolor{keywordflow}{if}(sign == 2)    \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_null_exception}{NullException}}();}
\DoxyCodeLine{218         \textcolor{keywordflow}{if}(sign != -\/1)   \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{219         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_a5d4b76a5a8edc6ee5ab2ec1761613627}{Negate}}();}
\DoxyCodeLine{220      \}}
\DoxyCodeLine{227     \mbox{\hyperlink{class_biginteger}{Biginteger}} \mbox{\hyperlink{class_biginteger_a613ba3e80119be32e985441e95cc80ed}{Add}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{}
\DoxyCodeLine{228         \textcolor{keywordflow}{if}(sign == 2||a.sign == 2)    \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_null_exception}{NullException}}();}
\DoxyCodeLine{229         \textcolor{comment}{//(1,-\/1)}}
\DoxyCodeLine{230         \textcolor{keywordflow}{if}(sign == 1\&\&a.sign == -\/1) \{}
\DoxyCodeLine{231             \mbox{\hyperlink{class_biginteger}{Biginteger}} add2 = a;}
\DoxyCodeLine{232             add2.sign = 1;}
\DoxyCodeLine{233             \textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_acc0f167fddfd031a425a9c844113cb5b}{Subt}}(add2);}
\DoxyCodeLine{234         \}}
\DoxyCodeLine{235         \textcolor{comment}{//(-\/1,1)}}
\DoxyCodeLine{236         \textcolor{keywordflow}{if}(sign == -\/1\&\&a.sign == 1) \{}
\DoxyCodeLine{237             \mbox{\hyperlink{class_biginteger}{Biginteger}} add1 = *\textcolor{keyword}{this},add2 = a;}
\DoxyCodeLine{238             add1.sign = 1;}
\DoxyCodeLine{239             \textcolor{keywordflow}{return} add2.Subt(add1);}
\DoxyCodeLine{240         \}}
\DoxyCodeLine{241         \textcolor{keywordtype}{int} minlen = std::min(eff\_len,a.eff\_len);}
\DoxyCodeLine{242         \textcolor{keywordtype}{bool} carry = 0;  \textcolor{comment}{//进位标记}}
\DoxyCodeLine{243         \mbox{\hyperlink{class_biginteger}{Biginteger}} ret(std::max(\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}},a.\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}}) + 1);  \textcolor{comment}{//待返回结果}}
\DoxyCodeLine{244         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < minlen; i++) \{}
\DoxyCodeLine{245             \textcolor{keywordtype}{int} now = data[i] + a.data[i] + carry;}
\DoxyCodeLine{246             ret.data[ret.eff\_len++] = now \% MOD\_BASE;}
\DoxyCodeLine{247             carry = (bool)(now / MOD\_BASE);}
\DoxyCodeLine{248         \}}
\DoxyCodeLine{249         \textcolor{keywordflow}{if}(minlen == eff\_len)    Add\_lefts(a,ret,carry,minlen);}
\DoxyCodeLine{250         \textcolor{keywordflow}{else}    Add\_lefts(*\textcolor{keyword}{this},ret,carry,minlen);}
\DoxyCodeLine{251         \textcolor{comment}{//处理多余进位}}
\DoxyCodeLine{252         \textcolor{keywordflow}{if}(carry != 0)   ret.data[ret.eff\_len++] = 1;}
\DoxyCodeLine{253         \textcolor{comment}{//(0,0)}}
\DoxyCodeLine{254         \textcolor{keywordflow}{if}(sign == 0\&\&a.sign == 0)    ret.sign = 0;}
\DoxyCodeLine{255         \textcolor{comment}{//(1,0),(1,1),(0,1)}}
\DoxyCodeLine{256         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(sign == 1||a.sign == 1)     ret.sign = 1;}
\DoxyCodeLine{257         \textcolor{comment}{//(-\/1,0),(-\/1,-\/1),(0,-\/1)}}
\DoxyCodeLine{258         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(sign == -\/1||a.sign == -\/1)   ret.sign = -\/1;}
\DoxyCodeLine{259         make\_length(ret);}
\DoxyCodeLine{260         \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{261     \}\textcolor{comment}{/*注意：拷贝构造函数的引用必须为const引用，因为返回值（拷贝）的函数的结果不能用于参数为普通引用类型的参数*/}}
\DoxyCodeLine{262     \mbox{\hyperlink{class_biginteger}{Biginteger}} operator+(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{\textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_a613ba3e80119be32e985441e95cc80ed}{Add}}(a);\}}
\DoxyCodeLine{269     \mbox{\hyperlink{class_biginteger}{Biginteger}} \mbox{\hyperlink{class_biginteger_acc0f167fddfd031a425a9c844113cb5b}{Subt}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{}
\DoxyCodeLine{270         \textcolor{keywordflow}{if}(sign == 2||a.sign == 2)    \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_null_exception}{NullException}}();}
\DoxyCodeLine{271         \mbox{\hyperlink{class_biginteger}{Biginteger}} suber = *\textcolor{keyword}{this},subee = a;}
\DoxyCodeLine{272         \textcolor{comment}{//(1,0),(-\/1,0),(0,0)}}
\DoxyCodeLine{273         \textcolor{keywordflow}{if}(subee.sign == 0)        \textcolor{keywordflow}{return} suber;}
\DoxyCodeLine{274         \textcolor{comment}{//(0,1),(0,-\/1)}}
\DoxyCodeLine{275         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(suber.sign == 0)   \textcolor{keywordflow}{return} subee.\mbox{\hyperlink{class_biginteger_a5d4b76a5a8edc6ee5ab2ec1761613627}{Negate}}();}
\DoxyCodeLine{276         \textcolor{comment}{//(1,-\/1)}}
\DoxyCodeLine{277         \textcolor{keywordflow}{if}(suber.sign == 1\&\&subee.sign == -\/1) \{}
\DoxyCodeLine{278             subee.sign = 1;}
\DoxyCodeLine{279             \textcolor{keywordflow}{return} suber.\mbox{\hyperlink{class_biginteger_a613ba3e80119be32e985441e95cc80ed}{Add}}(subee);}
\DoxyCodeLine{280         \}}
\DoxyCodeLine{281         \textcolor{comment}{//(-\/1,1)}}
\DoxyCodeLine{282         \textcolor{keywordflow}{if}(suber.sign == -\/1\&\&subee.sign == 1) \{}
\DoxyCodeLine{283             suber.sign = 1;}
\DoxyCodeLine{284             \textcolor{keywordflow}{return} suber.\mbox{\hyperlink{class_biginteger_a613ba3e80119be32e985441e95cc80ed}{Add}}(subee).\mbox{\hyperlink{class_biginteger_a5d4b76a5a8edc6ee5ab2ec1761613627}{Negate}}();}
\DoxyCodeLine{285         \}}
\DoxyCodeLine{286         \textcolor{comment}{//(-\/1,-\/1)}}
\DoxyCodeLine{287         \textcolor{keywordflow}{if}(subee.sign == -\/1\&\&suber.sign == -\/1) \{}
\DoxyCodeLine{288             suber.sign = subee.sign = 1;}
\DoxyCodeLine{289             std::swap(suber,subee);}
\DoxyCodeLine{290         \}}
\DoxyCodeLine{291         \textcolor{keywordtype}{int} tmp = suber.\mbox{\hyperlink{class_biginteger_a7b79e7d36214eb88bb7455585ca0ac31}{compare}}(subee);}
\DoxyCodeLine{292         \textcolor{keywordflow}{if}(tmp == -\/1) \{}
\DoxyCodeLine{293             std::swap(suber,subee);}
\DoxyCodeLine{294         \}}
\DoxyCodeLine{295         \mbox{\hyperlink{class_biginteger}{Biginteger}} ret(general\_subt(suber,subee));}
\DoxyCodeLine{296         ret.sign = tmp;}
\DoxyCodeLine{297         \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{298     \}}
\DoxyCodeLine{299     \mbox{\hyperlink{class_biginteger}{Biginteger}} operator-\/(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{\textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_acc0f167fddfd031a425a9c844113cb5b}{Subt}}(a);\}}
\DoxyCodeLine{306     \mbox{\hyperlink{class_biginteger}{Biginteger}} \mbox{\hyperlink{class_biginteger_a923e93c074d626e874c4833e315f4a8c}{Multiply}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{}
\DoxyCodeLine{307         \textcolor{keywordflow}{if}(sign == 2||a.sign == 2)    \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_null_exception}{NullException}}();}
\DoxyCodeLine{308         \textcolor{keywordtype}{int} aLen = a.eff\_len;}
\DoxyCodeLine{309         \mbox{\hyperlink{class_biginteger}{Biginteger}} ret(\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}} + a.\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}});  \textcolor{comment}{//存放结果}}
\DoxyCodeLine{310         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < eff\_len; i++) \{  \textcolor{comment}{//本数}}
\DoxyCodeLine{311             \textcolor{keywordtype}{int} carry = 0;}
\DoxyCodeLine{312             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = 0; j < aLen; j++) \{  \textcolor{comment}{//a}}
\DoxyCodeLine{313                 \textcolor{keywordtype}{int} now = data[i] * a.data[j] + carry + ret.data[i + j];}
\DoxyCodeLine{314                 carry = now / MOD\_BASE;}
\DoxyCodeLine{315                 ret.data[i + j]=now \% MOD\_BASE;}
\DoxyCodeLine{316             \}}
\DoxyCodeLine{317             \textcolor{keywordflow}{if}(carry != 0)    ret.data[i + aLen] = carry;}
\DoxyCodeLine{318         \}}
\DoxyCodeLine{319         ret.sign = (sign == a.sign) ? 1 : -\/1;}
\DoxyCodeLine{320         \textcolor{keywordflow}{if}(sign == 0||a.sign == 0)    ret.sign = 0;}
\DoxyCodeLine{321         ret.eff\_len = (int)ceil((\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}} + a.\mbox{\hyperlink{class_biginteger_a8e5b9f9b58b8591e9186e3f0dbcf9ffb}{length}}) / (double)NUM\_GROUP\_SIZE);  \textcolor{comment}{//?}}
\DoxyCodeLine{322         \textcolor{comment}{//最高位为0时，有效位数要-\/1，注意如果本来就是1就不用减}}
\DoxyCodeLine{323         \textcolor{keywordflow}{while}(ret.data[ret.eff\_len -\/ 1] == 0\&\&ret.eff\_len != 1)}
\DoxyCodeLine{324             ret.eff\_len-\/-\/;}
\DoxyCodeLine{325         make\_length(ret);}
\DoxyCodeLine{326         \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{327     \}}
\DoxyCodeLine{328     \mbox{\hyperlink{class_biginteger}{Biginteger}} operator*(\textcolor{keyword}{const} \mbox{\hyperlink{class_biginteger}{Biginteger}} \&a) \{\textcolor{keywordflow}{return} \mbox{\hyperlink{class_biginteger_a923e93c074d626e874c4833e315f4a8c}{Multiply}}(a);\}}
\DoxyCodeLine{333     \textcolor{keywordtype}{string} \mbox{\hyperlink{class_biginteger_ad9a324fd9b18667c7b967c0654287156}{toString}}() \{}
\DoxyCodeLine{334         \textcolor{keywordflow}{if}(sign == 2)   \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_null_exception}{NullException}}();}
\DoxyCodeLine{335         \textcolor{keywordflow}{if}(sign == 0)   \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}0"{}};}
\DoxyCodeLine{336         \textcolor{keywordtype}{string} ret = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{337         \textcolor{keywordtype}{int} now = 0;}
\DoxyCodeLine{338         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < eff\_len -\/ 1; i++) \{}
\DoxyCodeLine{339             \textcolor{keywordtype}{int} now = data[i];}
\DoxyCodeLine{340             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = 0; j < NUM\_GROUP\_SIZE; j++) \{}
\DoxyCodeLine{341                 ret.append(1,(now \% 10) + \textcolor{charliteral}{'0'});}
\DoxyCodeLine{342                 now /= 10;}
\DoxyCodeLine{343             \}}
\DoxyCodeLine{344         \}}
\DoxyCodeLine{345         now = abs(data[eff\_len -\/ 1]);}
\DoxyCodeLine{346         \textcolor{comment}{//处理最高位}}
\DoxyCodeLine{347         \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{348             ret.append(1,(now \% 10)+\textcolor{charliteral}{'0'});}
\DoxyCodeLine{349             now /= 10;}
\DoxyCodeLine{350         \} \textcolor{keywordflow}{while}(now > 0);}
\DoxyCodeLine{351         \textcolor{comment}{//处理减法结果为负数的情况}}
\DoxyCodeLine{352         \textcolor{keywordflow}{if}(sign == -\/1)    ret += \textcolor{stringliteral}{"{}-\/"{}};}
\DoxyCodeLine{353         std::reverse(ret.begin(),ret.end());}
\DoxyCodeLine{354         \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{355     \}}
\DoxyCodeLine{356     \mbox{\hyperlink{class_biginteger}{\string~Biginteger}}() \{}
\DoxyCodeLine{357         \textcolor{keywordflow}{if}(data != NULL) \{}
\DoxyCodeLine{358             \textcolor{keyword}{delete} []data;}
\DoxyCodeLine{359             data = NULL;}
\DoxyCodeLine{360         \}}
\DoxyCodeLine{361     \}}
\DoxyCodeLine{362 \};}
\DoxyCodeLine{363 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// BIGINT\_H}}

\end{DoxyCode}
